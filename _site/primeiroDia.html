<!DOCTYPE html>
<html>
    <head>
        <title>Minicurso de Spring</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./assets/css/styles.css">
        <link rel="stylesheet" href="/minicurso-linux-git/assets/css/syntax.css">
        <link rel="icon" href="https://i.ibb.co/RD7XwYH/pet-logo.png" type="image/png">
    </head>
    <body class="layoutConteudo">
        <header>
    <nav class="menuPrincipal">
        <ul class="listaNavegacao">
            <li>
                <a href="index">/home</a>
            </li>
            <li>
                <a href="aulas">/aulas</a>
            </li> 
            <li>
                <a href="sobre">/sobre</a>
            </li>
        </ul>
    </nav>
</header>


        <div>
            <main>
                <div class="conteudo-justificado">
                    <div id="sumario" class="sumario-git">

    <h1>Dia 1</h1>

    <details>
        <summary><a href="#revisando-java">Revisando Java</a></summary>
        <ul>
            <li><a href="#classes-e-objetos">Classes e Objetos</a></li>
            <li><a href="#encapsulamento">Encapsulamento</a></li>
            <li><a href="#organizando-código-em-java">Organizando Código em Java</a></li>
            <li><a href="#verificação-e-testes">Verificação e testes</a></li>
        </ul>
    </details>
    <details>
         <summary><a href="#introduzindo-o-spring">Introduzindo o Spring</a></summary>
        <ul>
            <li><a href="#ecossistema-spring">Ecossistema Spring</a></li>
            <li><a href="#entendendo-dependências">Entendendo Dependências</a>
                <ul> 
                    <li><a href="#spring-como-injetor-de-dependências">Spring como Injetor de Dependências</a>
                        <ul>
                            <li><a href="#applicationcontext">ApplicationContext</a></li>
                            <li><a href="#bean">Bean</a></li>
                            <li><a href="#annotations">Annotations</a></li>
                            <li><a href="#applicationproperties-ou-yml">Applicationproperties ou yml</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href="#spring-initialzr">Spring Initialzr</a></li>
            <li><a href="#gerenciadores-de-projeto">Gerenciadores de Projeto</a>
                <ul> 
                    <li><a href="#maves">Maven</a></li>
                    <li><a href="#gradle">Gradle</a></li>
                </ul>
            </li>
            <li><a href="#criando-um-projeto-pela-primeira-vez">Criando um Projeto Pela Primeira Vez</a></li>
            <li><a href="#praticando-a-camada-model">Praticando a Camada Model</a></li>
            <li><a href="#visualizando-resultados-na-prática">Visualizando Resultados na Prática</a></li>
        </ul>
    </details>

  <button class="toggle-button" id="toggle-button">
  
      Esconder Sumário
  
  </button>

</div>

<p><br /></p>

<h1 id="resumo-do-primeiro-dia">Resumo do primeiro dia</h1>

<p>Bem vindo ao minicurso <strong>Introdução ao desenvolvimento back-end com Spring!</strong></p>

<p>Esta é a primeira aula do nosso curso, portanto, será uma aula mais introdutória. Começaremos com uma revisão rápida de Java, pois é a linguagem base do framework, além de conceitos básicos de Programação Orientada a Objetos (POO). Logo após, vamos falar um pouco sobre o <strong>Ecossistema Spring</strong> e as diferentes aplicações das suas ferramentas, além de explicar como o Spring Framework funciona e, o mais importante: “Porque Spring Framework?”. Por fim, encerraremos a aula com um exercício onde você irá iniciar o seu primeiro projeto Spring utilizando a ferramenta Spring Initializr, além de alguns extras. Boa aula!</p>

<p>Todavia, antes de começarmos, é importante sanar ainda algumas dúvidas para aqueles que estão se iniciando agora no mundo do desenvolvimento web, em especial no que tange a onde o Spring se encaixa nesse ecossitema.</p>

<h1 id="o-básico-de-desenvolvimento-web">O Básico de desenvolvimento web</h1>

<p>Quando acessamos um site ou um aplicativo, estamos interagindo com um sistema que, na maioria das vezes, é dividido em duas partes principais, que se comunicam entre si, quais sejam o Front (à frente) e o Back (atrás).</p>

<h2 id="front-end-o-lado-do-cliente">Front-End (O lado do Cliente)</h2>

<p>É a interface gráfica, tudo aquilo que o usuário vê, clica e interage. Telas, botões, formulários, animações e o design da página. Geralmente é construído com HTML, CSS e JavaScript (junto com ferramentas como React, Angular ou Vue).</p>

<h2 id="back-end-o-lado-do-servidor">Back-End (O lado do Servidor)</h2>

<p>É o responsável por processar as regras de negócio, buscar ou salvar informações no banco de dados, garantir a segurança, autenticar usuários e devolver a informação processada para o Front-End exibir. É exatamente no Back-End que o Java e o Spring atuam!</p>

<h2 id="o-que-é-um-framework">O que é um Framework?</h2>

<p>Um Framework é um conjunto de códigos, bibliotecas e padrões de arquitetura pré-prontos que servem como um esqueleto ou fundação para o seu projeto.</p>

<h3 id="por-que-usar-um-framework">Por que usar um framework?</h3>

<ul>
  <li>Produtividade: Funcionalidades complexas e repetitivas, como conectar ao banco de dados, configurar rotas web ou lidar com segurança, já vêm prontas ou semi-prontas.</li>
  <li>Padronização: Um framework impõe uma estrutura lógica. Isso ajuda a manter um padrão de código organizado.</li>
  <li>Segurança e Estabilidade: Frameworks de mercado são utilizados e testado.</li>
  <li>Foco no Conteúdo: m vez de gastar dias configurando servidores e conexões, você pode gastar seu tempo programando funcionalidades da sua aplicação.</li>
</ul>

<h1 id="revisando-java">Revisando Java</h1>

<p>Antes de começarmos a estudar Spring é mais do que necessário darmos uma revisada na linguagem na qual o Spring se baseia, o Java!</p>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/java.png" width="40%" />
</div>

<h3 id="classes-e-objetos">Classes e Objetos</h3>

<p>Em Java, classes são moldes que definem a estrutura e o comportamento de objetos que sejam criados a partir dos mesmos. Por outro lado, objetos são instâncias das classes e se comportam conforme as regrinhas que foram estabelecidas em sua classe. Um exêmplo famoso que ajuda a lembrar bem desses dois conceitos é o da forma e do bolo: a forma é a classe que molda o bolo, o bolo é o objeto moldado pela forma.</p>

<p>As classes também possuem <strong>métodos</strong>, que consistem em funções que podem ser chamadas por qualquer instância daquela classe.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormaQuadrada</span><span class="o">{</span> <span class="c1">//a forma do bolo</span>
    <span class="kt">float</span> <span class="n">profundidade</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>
    <span class="kt">float</span> <span class="n">altura</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
    <span class="kt">float</span> <span class="n">largura</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">calcularVolume</span><span class="o">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">profundidade</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">altura</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">largura</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">FormaQuadrada</span> <span class="n">bolo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FormaQuadrada</span><span class="o">;</span>
        <span class="c1">//bolo é a instância da nossa classe, ou seja, o objeto</span>
        <span class="n">volumeBolo</span> <span class="o">=</span> <span class="n">bolo</span><span class="o">.</span><span class="na">calcularVolume</span><span class="o">()</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">volumeBolo</span><span class="o">)</span> <span class="c1">// o valor printado será 20 * 20 * 6 = 2400</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="exercício-1"><strong>Exercício 1:</strong></h3>

<p>Para ajudar a relembrar, ou ter certeza que já conhecemos classes, crie uma classe “User” em Java com atributos e métodos à sua escolha e instancie essa classe na classe Main. Sua classe pode ser oganizada da maneira que quiser, mas coloque um atributo booleano “ativo”.</p>

<h3 id="encapsulamento">Encapsulamento</h3>

<p>Encapsular é o ato de agrupar dados (atributos) e comportamentos (métodos) dentro de uma classe, e restringir o acesso direto aos componentes internos de um objeto. Isso permite que os atributos de uma classe só possam ser acessados ou alterados em situações específicas.</p>

<p>Imagine a classe contaBancaria:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">contaBancaria</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">dinheiroEmConta</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">senhaDoCliente</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Qualquer parte do código que tentar acessar o atributo senhaDoCliente de uma instância dessa classe, vai conseguir!</p>

<p>E da mesma maneira, qualquer parte do nosso código conseguiria adicionar e remover dinheiro sem nenhum tipo de checagem ou aviso.</p>

<p>Podemos, então, usar os conceitos de encapsulamento para proibir que esses atributos sejam acessados de qualquer maneira pelo resto do código:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">contaBancaria</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">dinheiroEmConta</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">senhaDoCliente</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Agora, apenas métodos da própria classe podem checar ou alterar esses valores!</p>

<p>Aqui vai uma tabelinha que mostra quais permissões de acesso são concedidas para cada modificador de acesso:</p>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/access-modifiers.png" width="60%" />
</div>

<h3 id="exercício-2"><strong>Exercício 2:</strong></h3>

<p>Agora que finalmente revimos o conceito de encapsulamento, volte nas classes “User” que você programou mais cedo e reveja se esses conceitos foram seguidos de maneira satisfatória!</p>

<h4 id="herança">Herança</h4>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/java-study.png" width="40%" />
</div>

<p>Uma classe pode herdar todos os atributos e métodos de uma outra classe. Esse conceito é conhecido como herança, vamos ver um exemplo:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormaRedonda</span><span class="o">{</span> <span class="c1">//a forma do bolo</span>
    <span class="kt">float</span> <span class="n">profundidade</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>
    <span class="kt">float</span> <span class="n">raio</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">calcularVolume</span><span class="o">(){</span>
      <span class="k">return</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="o">(</span><span class="n">raio</span> <span class="o">*</span> <span class="n">raio</span><span class="o">)</span> <span class="o">*</span> <span class="n">profundidade</span><span class="o">;</span>

  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormaRedondaComFuroNoMeio</span> <span class="kd">extends</span> <span class="nc">FormaRedonda</span> <span class="o">{</span>
    <span class="kt">float</span> <span class="n">profundidade</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span> 
    <span class="kt">float</span> <span class="n">raio</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span>
    <span class="kt">float</span> <span class="n">raioDoFuro</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
    
    <span class="c1">// aqui estamos sobreescrevendo o método "calcularVolume"</span>
    <span class="c1">// para manter a corretude na forma com um furo no meio.</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">calcularVolume</span> <span class="o">(){</span>
      <span class="n">volumeTotal</span> <span class="o">=</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="o">(</span><span class="n">raio</span> <span class="o">*</span> <span class="n">raio</span><span class="o">)</span> <span class="o">*</span> <span class="n">profundidade</span><span class="o">;</span>
      <span class="n">volumeFuro</span> <span class="o">=</span> <span class="mf">3.14</span> <span class="o">*</span> <span class="o">(</span><span class="n">raioDoFuro</span> <span class="o">*</span> <span class="n">raioDoFuro</span><span class="o">)</span> <span class="o">*</span> <span class="n">profundidade</span><span class="o">;</span>
      <span class="k">return</span> <span class="n">volumeTotal</span> <span class="o">-</span> <span class="n">volumeFuro</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exercício-3"><strong>Exercício 3:</strong></h3>

<p>Agora que relembramos o conceito de Herança, crie a classe “Admin” a partir da classe usuário. Objetos instanciados dessa classe devem poder chamar um método que desativa um usuário (muda o valor do atributo “Ativo” do usuário alvo para <em>false</em>).</p>

<h4 id="interfaces">Interfaces</h4>

<p>Em Java podemos criar classes que servem como “molde” para outras classes, dizendo o que devem implementar:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PagamentoService</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">processarPagamento</span><span class="o">(</span><span class="kt">double</span> <span class="n">valor</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CartaoCreditoService</span> <span class="kd">implements</span> <span class="nc">PagamentoService</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processarPagamento</span><span class="o">(</span><span class="kt">double</span> <span class="n">valor</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Lógica específica</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exercício-4"><strong>Exercício 4:</strong></h3>

<p>A partir da interface abaixo, implemente uma classe “AdminService” que atenda todos os requisitos de “GenericUserService”.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GenericUserService</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">verificarUserStatus</span><span class="o">(</span><span class="nc">User</span> <span class="n">usuario</span><span class="o">);</span> 
    <span class="kt">void</span> <span class="nf">reativarUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">usuario</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="organizando-código-em-java">Organizando Código em Java</h3>

<h4 id="pacotes">Pacotes</h4>

<p>É a principal maneira de se organizar código em Java, como se fosse em pastas. Eles evitam conflitos de nomes entre classes e refletem a modularização do sistema (ex.: com.exemplo.demo.controller).</p>

<h4 id="group-id">Group Id</h4>

<p>O Group Id identifica a organização do projeto, é similar ao domínio de uma empresa, mas ao contrário (ex.: com.exemplo).</p>

<h4 id="artifact-id">Artifact Id</h4>

<p>É o nome do projeto/aplicação e geralmente vira o nome do arquivo .jar (ex.: api-clientes).</p>

<h4 id="version">Version</h4>

<p>De maneira bem simples, version é a versão identificadora do artefato publicado.</p>

<h2 id="introduzindo-o-spring">Introduzindo o Spring</h2>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/spring-logo.png" width="40%" />
</div>

<p>Spring é um framework Java para criação de aplicações modernas, robustas e escaláveis. Ele facilita o desenvolvimento, fornecendo funcionalidades prontas para serem implementadas no projeto, dentre elas:</p>

<ul>
  <li>Injeção de dependências (IoC)</li>
  <li>Controle de ciclo de vida dos objetos</li>
  <li>Acesso simplificado a banco de dados</li>
  <li>Integração com APIs, segurança, web, mensagens etc.</li>
</ul>

<p>O principal objetivo do Spring é, então, ajudar o densenvolvedor a construir aplicações rapidamente e com código menos repetivivo.</p>

<h2 id="ecossistema-spring">Ecossistema Spring</h2>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/green-spring.png" width="60%" />
</div>

<p>O ecossistema Spring é um conjunto de mais de 20 ferramentas, módulos e projetos que trabalham juntos, de maneira em que cada projeto resolve um problema específico. Sendo assim, dentro de uma aplicação podemos utilizar diferentes ferramentas. Considere portanto o contexto de uma aplicação de pedidos de comida para <em>delivery</em>:</p>

<ul>
  <li>Spring Boot — Facilita iniciar aplicações rapidamente.
    <ul>
      <li>É uma versão opinativa do Spring Framework, isto é, com depedências já pré-instaladas e outras configurações já estabelecidas para tornar a inicialização de um projeto mais rápida e produtiva. No contexto da aplicação tem tanto um forte impacto no desenvolvimento quanto um impacto na velocidade de incialização, por exemplo.</li>
    </ul>
  </li>
  <li>Spring Data — Abstração para acesso a dados
    <ul>
      <li>Traz interfaces que podem ser utiilzadas para implementar muito rapidamente os métodos de acesso ao banco de dados da aplicação. No contexto da aplicação, o Spring Data seria utilizado para “puxar” do banco de dados (via <em>Queries</em>) coisas como nomes de restaurantes, avaliações, itens do cardápio de cada restaurante, etc.</li>
    </ul>
  </li>
  <li>Spring Security — autenticação, autorização, criptografia.
    <ul>
      <li>Seria utilizado para a criação de usuários para clientes e criação de restaurantes no contexto da aplicação, tudo de forma robusta e evitando problemas como vazamentos de dados, etc.</li>
    </ul>
  </li>
  <li>Spring AI — recursos para integrar modelos de IA (LLMs).
    <ul>
      <li>Poderia ser usado para a integração de um chatbot com a API da OpenAI que orientasse o usuário a como utilizar a aplicação.</li>
    </ul>
  </li>
  <li>Spring Cloud — soluções para microsserviços.
    <ul>
      <li>Poderia ser utilizado para integração da aplicação com outros serviços já existentes como o iFood, por exemplo.</li>
    </ul>
  </li>
  <li>Spring Batch — processamento em lote.
    <ul>
      <li>Otimização da aplicação.</li>
    </ul>
  </li>
  <li>Spring Web / WebFlux — APIs REST.
    <ul>
      <li>Estabelece o meio de comunicação entre Back-End, Front-End e Banco de dados.</li>
    </ul>
  </li>
  <li>Spring HATEOAS, Spring Integration, Spring AMQP, entre muitos outros.</li>
</ul>

<p>Nosso foco nesse minicurso será direcionado principalmente ao Spring Boot e Spring Web.</p>

<h2 id="entendendo-dependências">Entendendo Dependências</h2>

<p>Podemos entender como dependências as classes e objetos que um componente do projeto precisa para funcionar.</p>

<p>Elas podem ser úteis quando instanciar objetos manualmente pode ser custoso ou confuso, ou então quando temos configurações que precisam ser reaproveitadas. Por exemplo:</p>

<ul>
  <li>Conexões de banco</li>
  <li>Serviços com lógica complexa
<!--aumentar o número de exemplos--></li>
</ul>

<p>Sem injeção de dependências nesses casos, teriamos que criar tudo na mão, gerenciar ciclo de vida, conexões, configurações…</p>

<p>Já com injeções nossa vida fica mais fácil, o Spring controla a criaçãoo, destruição e fornecimento dos objetos, deixando o fluxo de trabalho mais fluido e organizado. Imagina ter que reiniciar manualmente a conexão de banco de dados toda vez que um serviço é criado!</p>

<h3 id="spring-como-injetor-de-dependências">Spring como Injetor de Dependências</h3>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/possum-coffee.png" width="40%" />
</div>

<h4 id="applicationcontext">ApplicationContext</h4>

<p>É o contêiner principal do Spring, responsável por criar objetos, armazená-los, gerenciar seu ciclo de vida e injetar dependências onde for preciso.</p>

<h4 id="bean">Bean</h4>

<p>São os objetos controlados pelo Spring. É o componente gerenciado pelo ApplicationContext. Exemplos comuns de beans são:</p>

<ul>
  <li>Services</li>
  <li>Controllers</li>
  <li>Repositories</li>
  <li>Configurações</li>
</ul>

<h4 id="annotations">Annotations</h4>

<p>São as instrução para o Spring, que dizem o que criar, quando criar, onde injetar e como configurar tudo. Como exemplos, temos:</p>

<ul>
  <li>@Component. <em>Utilidade: indica que a classe é gerida automaticamente pelo Spring</em></li>
  <li>@Service. <em>Utilidade: indica que a classe implementa lógicas de negócio</em></li>
  <li>@Repository. <em>Utilidade: abstrai o acesso ao banco de dados</em></li>
  <li>@Autowired. <em>Utilidade: injeta as dependências automaticamente</em></li>
  <li>@Configuration. <em>Utilidade: demarca que a classe define e configura os beans</em></li>
  <li>@Bean. <em>Utilidade: Declara que um método produz um bean gerenciado pelo Spring</em></li>
</ul>

<h4 id="applicationproperties-ou-yml">Applicationproperties ou yml</h4>

<p>O Application.properties serve como o arquivo central de configuração do Spring Boot, definindo compotamentos da aplicação sem alterar o código.</p>

<p>Exemplo do .properties:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">server</span><span class="o">.</span><span class="na">port</span><span class="o">=</span><span class="mi">8081</span>
<span class="n">spring</span><span class="o">.</span><span class="na">datasource</span><span class="o">.</span><span class="na">url</span><span class="o">=</span><span class="nl">jdbc:h2:mem:</span><span class="n">testdb</span>
<span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">show</span><span class="o">-</span><span class="n">sql</span><span class="o">=</span><span class="kc">true</span>
</code></pre></div></div>

<p>Exemplo do .yml:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">server</span><span class="pi">:</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">8081</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:h2:mem:testdb</span>
  <span class="na">jpa</span><span class="pi">:</span>
    <span class="na">show-sql</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h2 id="poo-no-spring">POO no Spring</h2>

<p>No início dessa aula tivemos uma revisão básica de Java e de Programação Orientada a Objetos (POO). Sendo assim, agora vamos entender como podemos aplicar esses conceitos no desenvolvimento da nossa aplicação.</p>

<h3 id="camadas-de-um-projeto-spring">Camadas de um projeto Spring</h3>

<p>Um projeto Spring geralmente é dividido em quatro camadas:</p>

<ul>
  <li>Model (ou Entity) - Objetos/Entidades do nosso site;</li>
  <li>Controller - Camada onde desenvolveremos nossa API;</li>
  <li>Service - Lógica de Negócio ;</li>
  <li>Repository - Comunicação direta com o Banco de Dados;</li>
</ul>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/springlayers.png" width="60%" /> </div>

<p><strong><em>OBS.: Como o foco desse curso é apenas desenvolvimento Web, as soluções relacionadas à camada Repository serão sempre disponibilizadas previamente</em></strong></p>

<p>Ao longo desse curso vamos focar no desenvolvimento das camadas Model, Controller e Service e, na aula de hoje, vamos nos aprofundar na camada Model.</p>

<p>Aqui está a estrutura resumida de um projeto Spring:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">
  ProjetoSpring/
  ├── diferentes arquivos de configuração, arquivos de documentação, etc.
  └── src
    ├── controller
    │   └── EntidadeController.java
    ├── model
    │   └── Entidade.java
    ├── repository
    │   └── EntidadeRepository.java
    └── service
        └── EntidadeService.java
</span></code></pre></div></div>

<p>Vamos ver essa estrutura em prática no final dessa aula.</p>

<h3 id="a-camada-model">A camada Model</h3>

<p>Voltemos um pouco ao exemplo da aplicação de delivery: para a implementação de uma operação como “Fazer Pedido”, precisamos implementar uma série de classes como a classe Usuário, a classe Cliente que herda de Usuário, a classe Restaurante, além de diversas outras classes que serão utilizadas no processamento do pagamento, uma classe para armazenar o pedido, etc.</p>

<p>Todas essas classes são chamadas, no contexto do projeto, de <em>entidades</em>, e é na camada Model que elas residem. Sendo assim, esta camada é a que mais se assemelha com a programação de qualquer outro projeto em Java.</p>

<p>Se você já estudou Banco de Dados alguma vez então você provavelmente está achando o nome “entidade” muito familiar, e você está no caminho certo! Todas as classes que são implementadas na camada model possuem ligação direta com as entidades do Banco de Dados da aplicação, e essa ligação é feita a partir de <em>Annotations</em>. Aqui está um exemplo de implementação de uma classe User na camada Model:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"nome"</span><span class="o">,</span> <span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"VARCHAR(255)"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"email"</span><span class="o">,</span> <span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"VARCHAR(255)"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user_type_id"</span><span class="o">)</span>
    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"user_type"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">User_Type</span> <span class="n">user_type</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Não se preocupe e entender agora cada uma dessas <em>Annotations</em>, apenas perceba que, antes da classe utilizamos <code class="language-plaintext highlighter-rouge">@Entity</code> para indicar ao compilador que aquela classe representa uma entidade do Banco de Dados, bem como antes de cada atributo utilizamos <code class="language-plaintext highlighter-rouge">@Column</code> para indicar que aquele atributo representa uma coluna específica da entidade (tabela). A partir dessas <em>Annotations</em> as classes do sistema e as entidades do banco se tornam 100% ligadas umas as outras.</p>

<h2 id="spring-initialzr">Spring Initialzr</h2>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/spring-initilzr.png" width="100%" />
</div>

<h2 id="gerenciadores-de-projeto">Gerenciadores de Projeto</h2>

<p>Gerenciadores de projeto tem como função principal resolver dependências automaticamente, controlar o ciclo de build (compilar, testar, empacotar e rodar) e padronizar o projeto para qualquer desenvolvedor.</p>

<h3 id="maven">Maven</h3>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/maven-logo.png" width="60%" />
</div>

<ul>
  <li>XML-based (usa pom.xml)</li>
  <li>Padronizado e opinativo</li>
  <li>Gerencia dependencias, ciclo de build, plugins e empacotamento</li>
  <li>Grande quantidade de bibliotecas disponível</li>
</ul>

<h3 id="gradle">Gradle</h3>

<div style="text-align: center;"> <img alt="Meme muito engraçado sobre arquivos do sistema" src="assets/images/Gradle-logo.png" width="60%" />
</div>

<ul>
  <li>DSL baseada em Groovy/Kotlin</li>
  <li>Mais rápido</li>
  <li>Flexível e altamente configurável</li>
  <li>Muito usado em projetos modernos (Spring, Android)</li>
</ul>

<h2 id="criando-um-projeto-pela-primeira-vez">Criando um Projeto Pela Primeira Vez</h2>

<p>Agora que vimos toda a parte teórica finalmente podemos começar a mexer com a parte prática da coisa. Iremos aprender a como usar o <a href="https://start.spring.io/">Spring Initialzr</a> para iniciar um projeto!</p>

<h4 id="passo-a-passo">Passo a Passo</h4>

<ul>
  <li>Abra o site do Spring Initialzr clicando <a href="https://start.spring.io/">aqui</a>.</li>
  <li>Nesse projetinho utilizaremos o <strong>Maven</strong> como nosso gerenciador de dependências.</li>
  <li>Selecione a linguagem que estamos usando nesse minicurso.</li>
  <li>Na seção Group, coloque o grupo ou instituição desejada.</li>
  <li>Na seção arctifact coloque o nome do projeto.</li>
  <li>Selecione <strong>Jar</strong> na seção Packaging.</li>
  <li>Selecione a versão 21 do Java.</li>
  <li>Clique em <strong>Add Dependencies</strong> e adicione as dependências: Spring Data JPA, H2 Database e Spring Web.</li>
  <li>Clique em <strong>Generate</strong>, baixe, extraia e abra o projeto no vscode.</li>
  <li>Abra a pasta  que contém {nomeDoSeuProjeto}Application.java em src/main/java/{group}/{arctifact}.</li>
  <li>Rode <code class="language-plaintext highlighter-rouge">./mvnw spring-boot:run</code> no terminal do vscode!</li>
</ul>

<h2 id="praticando-a-camada-model">Praticando a Camada Model</h2>

<p>Agora que temos o projeto aberto e rodando com sucesso nos nossos computadores, podemos finalmente colocar a mão na massa e começar a programação de verdade!</p>

<p>Para começar a codar a camada model, precisamos primeiro organizar sua estrutura de pastas. Na mesma pasta do arquivo (nomeDoProjeto)Aplication.java crie uma pasta “model”.Agora, dentro da pasta model, podemos começar a programar nossas classes que representarão as entidades da nossa pequena aplicação!</p>

<p>Iremos criar uma classe que representará petianos, então essa classe deve conter um identificador único, nome, curso, e uma string que terá a url da imagem de perfil.</p>

<p>Obs.: Lembrando que além de codar a classe em java padrão, precisamos nos atentar a usar as annotations do spring, então no fim teremos algo nesse modelo:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"id_user"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"nome"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"email"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<div style="text-align: center; padding-bottom: 50px; padding-top: 30px;">
  <b>-------------Live Coding------------</b>
</div>

<div style="text-align: center; padding-bottom: 50px;">
  <img alt="codando!!!!!" src="assets/images/codingtime.png" width="60%" style="filter: invert(1);" />
</div>

<p>Obs.: Para compilar, basta usarmos o comando <code class="language-plaintext highlighter-rouge">./mvnw spring-boot:run</code></p>

<h3 id="visualizando-resultados-na-prática">Visualizando Resultados na Prática</h3>

<p>Agora que fizemos uma classe da camada model, seria muito anticlimático que o método de visualizar tudo funcionando fosse apenas conseguir compilar o programa. Para dar um gostinho dos próximos dias, disponibilizaremos a camada controller e a repository desse mini projetinho, junto com um pequeno script sql que servirá para popular a tabela gerada pela classe petiano.</p>

<p><a href="https://drive.google.com/drive/folders/1jYb6jZxgWt59IMtkBH2j6aorvbVd5qbA?usp=sharing">Clicando aqui</a> vocês baixarão a camada controller, a camada repository, o script sql e o application.properties.</p>

<p>A organização da pasta principal do projeto (a que possui o arquivo {nomeDoProjeto}Application.java) deve ficar assim:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── controller
│   └── PetianoController.java
├── GabaritoProjetoPrimeiroDiaApplication.java
├── model
│   └── Petiano.java
└── repository
    └── PetianoRepository.java
</code></pre></div></div>

<p>O script data.sql e o application.properties devem ficar no diretório <code class="language-plaintext highlighter-rouge">src/main/resources/</code>.</p>

<p>Obs.: Os imports nas classes da camada controller e repository, assim como algumas configurações no application.properties devem ser modificados de acordo com o group e arctifact do projeto que você criou no spring.initialzr.</p>

<p>Agora, podemos rodar tudo com <code class="language-plaintext highlighter-rouge">./mvnw spring-boot:run</code>.</p>

<p>O resultado final pode ser visualizado abrindo o navegador de sua escolha e acessando o endereço <code class="language-plaintext highlighter-rouge">http://localhost:8080/petianos/get</code>.</p>

<div style="text-align: center; padding-bottom: 50px;">
  <img alt="emoji festejando!!!!" src="assets/images/partyemoji.png" width="30%" />
</div>

                </div>
            </main>
            <script src="./assets/js/sumario_script.js"></script>
        </div>
    </body>
</html>

<script type="text/javascript">
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  options: {
    ignoreHtmlClass: 'highlight|code'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>